const validationPatterns=[{type:"email",pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/},{type:"phone",pattern:/^\d\d\d\d\d\d\d\d\d$/},{type:"text",pattern:/^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]+$/},{type:"nip",pattern:/^\d\d\d\d\d\d\d\d\d\d$/},{type:"url",pattern:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/}],omittedAtributes=["method","name","id","class","aria-label","fs-formsubmit-element"],url="https://www.shoper.pl/ajax.php";function createEnterKeydownHandler(t,e){return function(a){"Enter"===a.key&&(a.preventDefault(),t.blur(),e.click())}}function validateInput(t){const e=t.getAttribute("data-form"),a=t.value,n=t.required,o=t.getAttribute("data-type");if(error=n&&""===a?`${e} - jest wymagane`:null,!error&&""!==a&&n){const t=validationPatterns.find((t=>t.type===o))?.pattern;t&&!t.test(a)&&(error=`${e} nie jest wypełnione prawidłowo`)}return n&&""===a?($(t).next().next().toggleClass("show",!0),$(t).next().toggleClass("show",!1),$(t).addClass("error")):($(t).next().next().toggleClass("show",!1),$(t).next().toggleClass("show",null!==error),$(t).toggleClass("error",null!==error)),error}function handleBlur(t){validateInput(t.target)}function validateForm(t){const e=t.querySelectorAll("input");let a=0;return e.forEach((t=>{validateInput(t)&&a++})),a}function sendFormDataToURL(t,e,a){const n=new FormData,o=e.attributes;for(let t=0;t<o.length;t++){const e=o[t].name.replace("data-",""),a=o[t].value;""===a||omittedAtributes.includes(e)||n.append(e,a)}const r=e.querySelectorAll("input, textarea");let l=[],s=[];r.forEach((t=>{let e=t.value;const a=t.getAttribute("data-form");"checkbox"===t.type?(e=t.nextElementSibling.textContent.replace(/[^\u0000-\u007F\u0100-\u017F]+/g,"").trim(),"country"===a&&t.checked?l.push(e):"marketplace"===a&&t.checked&&s.push(e)):""!==e&&n.append(a,e)})),l.length>0&&n.append("country",l),s.length>0&&n.append("marketplace",s),$.ajax({type:"POST",url:t,data:n,processData:!1,contentType:!1,success:function(){$(a).parent().hide(),$(a).parent().next().show()},error:function(){$(a).siblings(".error-message").show()}})}function handleSubmitClick(t){t.preventDefault();const e=this,a=this.closest("form");0===validateForm(a)&&sendFormDataToURL(urlN,a,e)}function trackFormSubmit(t,e,a){$(document).ajaxComplete((function(n){const o=$(t)[0];console.log(o,n.status);const r={eventLabel:window.location.href,eventType:o.getAttribute("data-app")};200===n.status?Object.assign(r,e,{eventAction:"submitSuccess"}):Object.assign(r,a,{eventAction:"submitError"}),window.dataLayer.push(r),console.log(window.dataLayer)}))}document.querySelectorAll("input").forEach((t=>{const e=t.closest("form").querySelector("[data-form='submit']");t.addEventListener("blur",handleBlur),t.addEventListener("keydown",createEnterKeydownHandler(t,e))})),$("[data-form='submit']").click(handleSubmitClick),$("[data-app^='open_']").on("click",(function(){const t=$(this).data("app").replace(/^open_|_modal_button$/g,"");$(`[data-app='${t}']`).addClass("modal--open"),$(document.body).toggleClass("overflow-hidden",!0)})),console.log("dataLayer"),trackFormSubmit("[data-app='consult']",{event:"event1-onsuccess",eventCategory:"category1"},{event:"event2-onerror",eventCategory:"category2"});
//# sourceMappingURL=main.min.js.map
