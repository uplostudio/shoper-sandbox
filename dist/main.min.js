const validationPatterns=[{type:"email",pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/},{type:"phone",pattern:/^\d\d\d\d\d\d\d\d\d$/},{type:"text",pattern:/^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]+$/},{type:"nip",pattern:/^\d\d\d\d\d\d\d\d\d\d$/},{type:"url",pattern:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/}],omittedAtributes=["method","name","id","class","aria-label","fs-formsubmit-element"],url="https://www.shoper.pl/ajax.php";let error;function createEnterKeydownHandler(t,e){return function(a){"Enter"===a.key&&(a.preventDefault(),t.blur(),e.click())}}function validateInput(t){const e=t.getAttribute("data-form"),a=t.value,n=t.required,r=t.getAttribute("data-type");if(error=n&&""===a?`${e} - jest wymagane`:null,!error&&""!==a&&n){const t=validationPatterns.find((t=>t.type===r))?.pattern;t&&!t.test(a)&&(error=`${e} nie jest wypełnione prawidłowo`)}return n&&""===a?($(t).next().next().toggleClass("show",!0),$(t).next().toggleClass("show",!1),$(t).addClass("error")):($(t).next().next().toggleClass("show",!1),$(t).next().toggleClass("show",null!==error),$(t).toggleClass("error",null!==error)),console.log(error),error}function handleBlur(t){validateInput(t.target)}function validateForm(t){const e=t.querySelectorAll("input");let a=0;return e.forEach((t=>{validateInput(t)&&a++})),a}function sendFormDataToURL(t,e,a){const n=new FormData,r=e.attributes;for(let t=0;t<r.length;t++){const e=r[t].name.replace("data-",""),a=r[t].value;""===a||omittedAtributes.includes(e)||n.append(e,a)}e.querySelectorAll("input, textarea").forEach((t=>{const e=t.value,a=t.getAttribute("data-form");""!==e&&n.append(a,e)})),$.ajax({type:"POST",url:t,data:n,processData:!1,contentType:!1,success:function(){$(a).parent().hide(),$(a).parent().next().show()},error:function(){$(a).siblings(".error-message").show()}})}function handleSubmitClick(t){t.preventDefault();const e=this,a=this.closest("form");0===validateForm(a)&&sendFormDataToURL(url,a,e)}function trackFormSubmit(t,e,a){$(document).ajaxComplete((function(n){const r=$(t)[0];console.log(r,n.status);const o={eventLabel:window.location.href,eventType:r.getAttribute("data-app")};200===n.status?Object.assign(o,e,{eventAction:"submitSuccess"}):Object.assign(o,a,{eventAction:"submitError"}),window.dataLayer.push(o),console.log(window.dataLayer)}))}document.querySelectorAll("input").forEach((t=>{const e=t.closest("form").querySelector("[data-form='submit']");t.addEventListener("blur",handleBlur),t.addEventListener("keydown",createEnterKeydownHandler(t,e))})),$("[data-form='submit']").click(handleSubmitClick),$("[data-app^='open_']").on("click",(function(){const t=$(this).data("app").replace(/^open_|_modal_button$/g,"");$(`[data-app='${t}']`).addClass("modal--open"),console.log(t)})),console.log("dataLayer"),trackFormSubmit("[data-app='consult']",{event:"event1-onsuccess",eventCategory:"category1"},{event:"event2-onerror",eventCategory:"category2"});
//# sourceMappingURL=main.min.js.map
