const validationPatterns=[{type:"email",pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/},{type:"phone",pattern:/^\d\d\d\d\d\d\d\d\d$/},{type:"text",pattern:/^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]+$/},{type:"nip",pattern:/^\d\d\d\d\d\d\d\d\d\d$/},{type:"url",pattern:/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/}],omittedAtributes=["method","name","id","class","aria-label","fs-formsubmit-element","wf-page-id","wf-element-id"],urlN="https://www.shoper.pl/ajax.php";function createEnterKeydownHandler(e,t){return function(a){"Enter"===a.key&&(a.preventDefault(),e.blur(),t.click())}}function validateInput(e){const t=e.getAttribute("data-form"),a=e.value,n=e.required,r=e.getAttribute("data-type");if(error=n&&""===a?`${t} - jest wymagane`:null,!error&&""!==a&&n){const e=validationPatterns.find((e=>e.type===r))?.pattern;e&&!e.test(a)&&(error=`${t} nie jest wypełnione prawidłowo`)}return n&&""===a?($(e).next().next().toggleClass("show",!0),$(e).next().toggleClass("show",!1),$(e).addClass("error")):($(e).next().next().toggleClass("show",!1),$(e).next().toggleClass("show",null!==error),$(e).toggleClass("error",null!==error)),error}function handleBlur(e){validateInput(e.target)}function validateForm(e){const t=e.querySelectorAll("input");let a=0;return t.forEach((e=>{validateInput(e)&&a++})),a}function sendFormDataToURL(e,t,a,n){const r=new FormData,o=t.attributes;for(let e=0;e<o.length;e++){const t=o[e].name.replace("data-",""),a=o[e].value;""===a||omittedAtributes.includes(t)||r.append(t,a)}const s=t.querySelectorAll("input, textarea");let i=[],l=[];s.forEach((e=>{let t=e.value;const a=e.getAttribute("data-form");"checkbox"===e.type?(t=e.nextElementSibling.textContent.replace(/[^\u0000-\u007F\u0100-\u017F]+/g,"").trim(),"country"===a&&e.checked?i.push(t):"marketplace"===a&&e.checked&&l.push(t)):""!==t&&r.append(a,t)})),i.length>0&&r.append("country",i),l.length>0&&r.append("marketplace",l),$.ajax({type:"POST",url:e,data:r,processData:!1,contentType:!1,success:function(e){if(n.show(),r.has("host"))return 1===e.status?($(t).siblings(".error-message").hide(),n.hide(),void(window.location.href=e.redirect)):(n.hide(),void $(t).siblings(".error-message").show());successResponse(t),$(a).parent().hide(),$(a).parent().next().show()},error:function(){errorResponse(t),$(t).siblings(".error-message").show()}})}function handleSubmitClick(e){e.preventDefault();const t=this,a=this.closest("form"),n=$(this).find(".loading-in-button");0===validateForm(a)&&sendFormDataToURL(urlN,a,t,n)}function pushDataToDataLayer(e,t){if("true"!==e.getAttribute("data-layer"))return;const a={event:"myTrackEvent",eventCategory:t,eventAction:$(e).find("#label").text(),eventLabel:window.location.pathname},n=$(originalTrigger).attr("data-lead_offer");n&&(a.lead_offer=n),window.dataLayer=window.dataLayer||[],window.dataLayer.push(a),console.log(window.dataLayer)}function successResponse(e){pushDataToDataLayer(e,"Button modal form sent")}function errorResponse(e){pushDataToDataLayer(e,"Button modal form error")}document.querySelectorAll("input").forEach((e=>{const t=e.closest("form").querySelector("[data-form='submit']");e.addEventListener("blur",handleBlur),e.addEventListener("keydown",createEnterKeydownHandler(e,t))})),$("[data-form='submit']").click(handleSubmitClick),$("[data-app^='open_']").on("click",(function(){originalTrigger=$(this);const e=originalTrigger.data("app").replace(/^open_|_modal_button$/g,"");$(`[data-app='${e}']`).addClass("modal--open"),$(document.body).toggleClass("overflow-hidden",!0)})),$("[fs-formsubmit-element='reset']").on("click",(function(){$(".loading-in-button").hide()}));
//# sourceMappingURL=main.min.js.map
